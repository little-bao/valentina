#!/bin/sh

# Pre-push hook: run build before push
echo "üî® Running build before push..."

# Check if we're using npm, pnpm, or yarn
if [ -f "pnpm-lock.yaml" ]; then
  BUILD_CMD="pnpm run build"
elif [ -f "yarn.lock" ]; then
  BUILD_CMD="yarn build"
else
  BUILD_CMD="npm run build"
fi

# Run build
$BUILD_CMD

# Check if build was successful
if [ $? -ne 0 ]; then
  echo "‚ùå Build failed! Push aborted."
  echo "Please fix the build errors before pushing."
  exit 1
fi

echo "‚úÖ Build successful! Proceeding with push..."
exit 0
